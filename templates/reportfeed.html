<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // CRITICAL OPTIMIZATION: Instant Auth Redirect
        (function () {
            if (localStorage.getItem('isLoggedIn') !== 'true') {
                window.location.replace("login.html");
            } else {
                // Role Check
                const userType = localStorage.getItem('userType');
                if (userType === 'authority') {
                    window.location.replace("authority-dashboard.html");
                }
            }
        })();
    </script>
    <title>Report Feed - Setu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="../static/css/set1_style.css">
    <!-- RESPECTIVE CSS PAGE -->
    <link rel="stylesheet" href="../static/css/report-card.css">
    <link rel="stylesheet" href="../static/css/navigation.css">
    <link rel="stylesheet" href="../static/css/settings.css">
    <link rel="stylesheet" href="../static/css/notifications.css">

    <!-- Viewer.js for Image Preview -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.css"
        integrity="sha512-za6IYQz7tR0pzniM/EAkgjV1gzvqK14eG1esb4yVGPkOpj09r4Yob78Xp158ybmO2p4ageZ10RP6G+TjBL9tLg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.11.6/viewer.min.js"
        integrity="sha512-EC3CQ+2OkM+ZKsM12Y6O6vlDazTj+PM9qTGDsoWib6jWqaCx3Q1XM3x5xhgF6AgIFgMXHMNZq3k0xL50Fz0qEw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="../static/js/notifications.js" defer></script>
    <script src="../static/js/settings.js" defer></script>
    <script src="../static/js/navigation.js" defer></script>
    <script src="../static/js/setu-ai.js" defer></script>
</head>

<body
    class="antialiased pb-28 sm:pb-0 bg-[var(--bg-primary)] text-[var(--text-primary)] transition-colors duration-300">
    <div id="app" class="min-h-screen">
        <!-- Header + Filter Panel ‚Äî both sticky together -->
        <div class="sticky top-0 z-40 bg-[var(--bg-primary)]">
            <header class="py-3 px-4 border-b border-[var(--border-light)]">
                <div class="max-w-7xl mx-auto flex items-center">
                    <a href="index.html" class="mr-4 p-2 rounded-full hover:bg-[var(--bg-secondary)] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor" class="w-6 h-6 text-[var(--text-primary)]">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                        </svg>
                    </a>
                    <h1 class="text-xl font-bold text-[var(--text-primary)] flex-grow">Reports in your area</h1>

                    <!-- Redesigned Filter Button -->
                    <button id="filter-btn" class="filter-btn-redesigned" aria-label="Filter reports">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z" />
                        </svg>
                        Filters
                        <span class="filter-count-badge">0</span>
                    </button>
                </div>
            </header>

            <!-- Filter Panel (slides open below header, stays sticky) -->
            <div id="filter-panel" class="filter-panel">
                <div class="filter-panel-inner">
                    <!-- Location Filter -->
                    <div class="filter-section">
                        <span class="filter-section-label">Location</span>
                        <div class="filter-chips">
                            <button class="filter-chip" data-filter-group="location" data-filter-value="nearby"
                                id="nearby-chip">üìç Nearby (10 km)</button>
                        </div>
                    </div>

                    <!-- Status Filter -->
                    <div class="filter-section">
                        <span class="filter-section-label">Status</span>
                        <div class="filter-chips">
                            <button class="filter-chip" data-filter-group="status" data-filter-value="Pending">üü°
                                Pending</button>
                            <button class="filter-chip" data-filter-group="status" data-filter-value="In Progress">üîµ In
                                Progress</button>
                            <button class="filter-chip" data-filter-group="status" data-filter-value="Resolved">üü¢
                                Resolved</button>
                        </div>
                    </div>

                    <!-- Issue Type Filter -->
                    <div class="filter-section">
                        <span class="filter-section-label">Issue Type</span>
                        <div class="filter-chips">
                            <button class="filter-chip" data-filter-group="type"
                                data-filter-value="Pothole">Pothole</button>
                            <button class="filter-chip" data-filter-group="type"
                                data-filter-value="Garbage Dumps">Garbage Dumps</button>
                            <button class="filter-chip" data-filter-group="type"
                                data-filter-value="Broken Streetlight">Broken Streetlight</button>
                            <button class="filter-chip" data-filter-group="type" data-filter-value="Water Leakage">Water
                                Leakage</button>
                            <button class="filter-chip" data-filter-group="type" data-filter-value="Sewage Issue">Sewage
                                Issue</button>
                            <button class="filter-chip" data-filter-group="type" data-filter-value="Road Damage">Road
                                Damage</button>
                            <button class="filter-chip" data-filter-group="type"
                                data-filter-value="Illegal Parking">Illegal Parking</button>
                            <button class="filter-chip" data-filter-group="type" data-filter-value="Tree Fallen">Tree
                                Fallen</button>
                            <button class="filter-chip" data-filter-group="type" data-filter-value="Stray Animals">Stray
                                Animals</button>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="filter-actions">
                        <button class="filter-clear-btn">Clear All</button>
                        <button class="filter-apply-btn">Apply Filters</button>
                    </div>
                </div>
            </div>
        </div>

        <main class="max-w-3xl mx-auto px-4 py-6">
            <!-- Feed Container -->
            <div id="feed-container">
                <!-- Loaded via JS -->
                <p class="text-center text-[var(--text-muted)] mt-10">Loading reports...</p>
            </div>
        </main>
    </div>

    <!-- Google Translate -->
    <div id="google_translate_element"></div>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" async defer></script>
    <script>
        function googleTranslateElementInit() { new google.translate.TranslateElement({ pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false }, 'google_translate_element'); }
    </script>
    <script type="module" src="../static/js/reportfeed.js"></script>
    <script type="module" src="../static/js/logout.js"></script>
</body>

</html>